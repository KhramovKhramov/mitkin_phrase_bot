# Проект НейроМитькин

НейроМитькин – это Telegram-бот, благодаря цепям Маркова «разговаривающий» как тюменский спортивный журналист Владимир Митькин. Когда вы общаетесь с ботом лично, он присылает вам сгенерированные на цепях Маркова фразы, которые можно добавить в базу данных. Если же добавить бота в диалог в Telegram, то, среагировав на определенное слово в диалоге, бот будет присылать в чат рандомную фразу из базы данных.

### [Попробовать бота](https://t.me/mitkin_phrase_bot)

1. Выполните команду /start
2. Отправьте боту слово «Вперед», и он начнет генерировать новые фразы
3. Если хотите добавить предложенную фразу в базу данных, нажмите «Добавить». В противном случае нажмите «Пропустить»


## Дополнительная документация

1. [Краткое введение в цепи Маркова](https://habr.com/ru/post/455762/)
2. [Документация библиотеки markovify](https://github.com/jsvine/markovify)

Проект запущен ранее был запущен на Heroku, ныне переехал на PythonAnywhere. Ранее в качестве базы данных использовалась MongoDB, теперь – SQLite.

## Настройка

1. Выполните в консоли команды:
```
#клонируем репозиторий:
git clone https://github.com/KhramovKhramov/mitkin_phrase_bot.git

#создаем виртуальное окружение (пример для MacOS):
python3 -m venv .venv

#активируем виртуальное окружение (пример для MacOS):
source .venv/bin/activate

#устанавливаем зависимости:
pip install -r requirements.txt
```

2. Создайте в папке bot файл settings.py и добавьте туда следующие настройки:
```
API_KEY = 'API-ключ вашего Telegram-бота, который вам выдал бот BotFather'
SQLITE_DB_NAME = 'Имя вашей базы данных'
```

3. Если вы хотите сгенерировать на цепях Маркова тексты в стиле другого журналиста (или вообще любые другие тексты), замените файл full.txt на свой. Если тексты необходимо «вытащить» с сайта, пример работы парсера можно найти в папке parser.

4. Если вы хотите заменить слова, на которые бот будет реагировать в чатах Telegram, сделать это можно в файле main.py в соответствующих MessageHandler (менять необходимо только те «хэндлеры», что вызывают функцию get_phrase).

## Запуск

Запустите команду при активированном виртуальном окружении:
```
python main.py
```